!function e(t,n,o){function i(s,c){if(!n[s]){if(!t[s]){var a="function"==typeof require&&require;if(!c&&a)return a(s,!0);if(r)return r(s,!0);var d=new Error("Cannot find module '"+s+"'");throw d.code="MODULE_NOT_FOUND",d}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){var n=t[s][1][e];return i(n?n:e)},u,u.exports,e,t,n,o)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(e){var t=e("./ad-loader");!function(e){var n;e.ads=e.ads||{placements:[]},e.ads.adtech&&e.ads.placements.length&&(n=new t({adtech:e.ads.adtech,placements:e.ads.placements}),n.load()),e.ads.placements={push:function(o){n||(n=new t({adtech:e.ads.adtech})),n.load(o)}}}(window)},{"./ad-loader":3}],2:[function(e){!function(e,t){var n=this;"function"==typeof define&&define.amd?define(e,function(){return n[e]=t()}):window[e]=t()}("happy",function(){var t=e("./ad-loader");return t})},{"./ad-loader":3}],3:[function(e,t){(function(n){var o=e("./create-iframe"),i=e("./utils"),r=i.bind,s=i.onElement,c=i.extend,a=function(e){this.config=c({adtech:{},placements:[]},e)};c(a.prototype,{getRequest:function(){var e,t=this;return e=window.XMLHttpRequest?new XMLHttpRequest:new n.ActiveXObject("MSXML2.XMLHTTP.3.0"),e.onreadystatechange=function(){4===e.readyState&&(console.log("Hello, i am ads and here i am"),t.onResponse.call(t,JSON.parse(e.responseText)))},e},isEmpty:function(e){return-1===e.indexOf(this.config.emptySelector)},onResponse:function(e){var t,n,i,c,a,d,u;for(t in e.ADTECH_MultiAd){if(i=e.ADTECH_MultiAd[t],c=i.Ad.AdCode,this.isEmpty(c)){u=null;for(n in this.config.placements)if(this.config.placements[n].id==parseInt(i.PlacementId,10)){u=this.config.placements[n],console.log(u,this.config.placements[u],parseInt(i.PlacementId,10));break}u&&(u.selector||(u.selector="#ad-"+u.name),a=new o(u.id,i.Ad.AdCode),s(u.selector,r(a.renderTo,a),this.onElementNotFound))}d=null}},onElementNotFound:function(){console.log("No container found")},load:function(e){var t,n,o=[];"undefined"!=typeof e?"undefined"!=typeof e.id?(this.config.placements.push(e),e=[e]):"undefined"!=typeof e.length&&(this.config.placements=this.config.placements.concat(e)):e=this.config.placements;for(t in e)o.push(e[t].id);console.log("Where are you ads?",o),n=this.getRequest(),n.open("GET",(this.config.proxy||"..")+"/proxy.php?placements="+o.join(","),!0),n.send()}}),t.exports=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./create-iframe":4,"./utils":5}],4:[function(e,t){var n,o=e("./utils"),i=o.on,r=o.off,s=o.bind,c=o.attr,a=o.extend,d=o.nextTick,u=function(e,t){var o="";this.id=e,o+='<!doctype *><html><head><style>body { margin:0; )</style></head><body><div id="ad">',o+="<script>",o+=t,o+="</script>",o+="</div></body></html>",this.iframe=n?n.cloneNode():n=document.createElement("iframe"),this.renderIframeContents(e,o),i(this.iframe,"load",s(this.onLoad,this)),i(this.iframe,"load",s(this.resize,this))};a(u.prototype,{iframe:null,contentDocument:null,supportSrcDoc:function(){var e="srcdoc"in this.iframe;return this.supportSrcDoc=function(){return e},this.supportSrcDoc()},renderIframeContents:function(e,t){if(c(this.iframe,{id:e,scrolling:"no",frameborder:0}),this.supportSrcDoc())this.iframe.setAttribute("srcdoc",t),c(this.iframe,{srcdoc:t});else{var n=this.getContentDocument();n.open(),n.write(t),setTimeout(function(){n.close()},100),console.log("srcdoc missing, writing old school")}},renderTo:function(e){d(s(function(){for(;e.lastChild;)e.removeChild(e.lastChild);e.appendChild(this.iframe)},this))},getContentDocument:function(){return this.contentDocument||(this.contentDocument=this.iframe.contentDocument),this.contentDocument},container:function(){return this.iframe},remove:function(){console.log("Removing: #"+this.id),this.iframe.parentNode&&(r(this.iframe,"load",this.onLoad),r(this.iframe,"load",this.resize),this.iframe.parentNode.removeChild(this.iframe))},onLoad:function(){var e=this.getContentDocument();console.log("Loaded: #"+this.id),e.querySelector('[src*="blank_pix_house.gif"]')&&this.remove()},resize:function(){var e=this.getContentDocument();if(e){var t=e.documentElement,n=t.scrollHeight,o=t.scrollWidth;console.log("Resize: #"+this.id+" width:"+o+"px height:"+n+"px"),console.count("resize"),0===n||0===o?this.remove():c(this.iframe,{width:o,height:n})}else this.remove()}}),t.exports=u},{"./utils":5}],5:[function(e,t){var n=function(e,t,o){(n=e.addEventListener?function(e,t,n){return e.addEventListener(t,n,!1)}:function(e,t,n){return e.attachEvent("on"+t,n)})(e,t,o)},o=function(e,t){return(o=e.bind?function(e,t){return e.bind(t)}:function(e,t){return function(){return e.apply(t,arguments)}})(e,t)},i=function(e,t){for(var n in t)e.setAttribute(n,t[n])},r=function(){if(window.Promise){var e=Promise.resolve();return function(t){e.then(t)}}return window.setImmidiate?function(e){setImmidiate(e)}:function(e){setTimeout(e,0)}}(),s=function(e,t,n){var o=document.querySelector(e);o?t(o):"complete"!==document.readyState?r(function(){s(e,t,n)}):"function"==typeof n&&n()},c=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e};t.exports={bind:o,attr:i,on:n,onElement:s,nextTick:r,extend:c}},{}]},{},[2,1]);