!function(e){var t=e.document;!function n(e,t,o){function i(s,c){if(!t[s]){if(!e[s]){var a="function"==typeof require&&require;if(!c&&a)return a(s,!0);if(r)return r(s,!0);var f=new Error("Cannot find module '"+s+"'");throw f.code="MODULE_NOT_FOUND",f}var u=t[s]={exports:{}};e[s][0].call(u.exports,function(t){var n=e[s][1][t];return i(n?n:t)},u,u.exports,n,e,t,o)}return t[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(t){var n=t("./ad-loader");!function(e){var t;e.ads=e.ads||{placements:[]},e.ads.adtech&&e.ads.placements.length&&(t=new n({adtech:e.ads.adtech,placements:e.ads.placements}),t.load()),e.ads.placements={push:function(o){t||(t=new n({adtech:e.ads.adtech})),t.load(o)}}}(e)},{"./ad-loader":3}],2:[function(t){!function(t,n){var o=this;"function"==typeof define&&define.amd?define(t,function(){return o[t]=n()}):e[t]=n()}("happy",function(){var e=t("./ad-loader");return e})},{"./ad-loader":3}],3:[function(e,t){var n=e("./create-iframe"),o=e("./request"),i=e("./utils"),r=i.bind,s=i.onElement,c=i.extend,a=function(e){this.config=c({adtech:{},placements:[]},e)};c(a.prototype,{getRequest:function(e){var t=new o(e);return t},isEmpty:function(e){return-1===e.indexOf(this.config.emptySelector)},onResponse:function(e){var t,o,i,c,a,f,u;for(t in e.ADTECH_MultiAd){if(i=e.ADTECH_MultiAd[t],c=i.Ad.AdCode,this.isEmpty(c)){u=null;for(o in this.config.placements)if(this.config.placements[o].id==parseInt(i.PlacementId,10)){u=this.config.placements[o],console.log(u,this.config.placements[u],parseInt(i.PlacementId,10));break}u&&(u.selector||(u.selector="#ad-"+u.name),a=new n(u.id,i.Ad.AdCode),s(u.selector,r(a.renderTo,a),this.onElementNotFound))}f=null}},onElementNotFound:function(){console.log("No container found")},load:function(e){var t,n=[];"undefined"!=typeof e?"undefined"!=typeof e.id?(this.config.placements.push(e),e=[e]):"undefined"!=typeof e.length&&(this.config.placements=this.config.placements.concat(e)):e=this.config.placements;for(t in e)n.push(e[t].id);console.log("Where are you ads?",n),this.getRequest({jsonp:!0,url:(this.config.proxy||"..")+"/proxy.php?placements="+n.join(","),onLoad:r(function(e){console.log("Hello, i am ads and here i am"),this.onResponse.call(this,e)},this)})}}),t.exports=a},{"./create-iframe":4,"./request":5,"./utils":6}],4:[function(e,n){var o,i=e("./utils"),r=i.on,s=i.off,c=i.bind,a=i.attr,f=i.extend,u=i.nextTick,l=function(e,n){var i="";this.id=e,i+='<!doctype *><html><head><style>body { margin:0; )</style></head><body><div id="ad">',i+="<script>",i+=n,i+="</script>",i+="</div></body></html>",this.iframe=o?o.cloneNode():o=t.createElement("iframe"),this.renderIframeContents(e,i),r(this.iframe,"load",c(this.onLoad,this)),r(this.iframe,"load",c(this.resize,this))};f(l.prototype,{iframe:null,contentDocument:null,supportSrcDoc:function(){var e="srcdoc"in this.iframe;return this.supportSrcDoc=function(){return e},this.supportSrcDoc()},renderIframeContents:function(e,t){if(a(this.iframe,{id:e,scrolling:"no",allowfullscreen:"true",mozallowfullscreen:"true",webkitallowfullscreen:"true",frameborder:0}),this.supportSrcDoc())this.iframe.setAttribute("srcdoc",t),a(this.iframe,{srcdoc:t});else{var n=this.getContentDocument();n.open(),n.write(t),setTimeout(function(){n.close()},100),console.log("srcdoc missing, writing old school")}},renderTo:function(e){u(c(function(){for(;e.lastChild;)e.removeChild(e.lastChild);e.appendChild(this.iframe)},this))},getContentDocument:function(){return this.contentDocument||(this.contentDocument=this.iframe.contentDocument),this.contentDocument},container:function(){return this.iframe},remove:function(){console.log("Removing: #"+this.id),this.iframe.parentNode&&(s(this.iframe,"load",this.onLoad),s(this.iframe,"load",this.resize),this.iframe.parentNode.removeChild(this.iframe))},onLoad:function(){var e=this.getContentDocument();console.log("Loaded: #"+this.id),e.querySelector('[src*="blank_pix_house.gif"]')&&this.remove()},resize:function(){var e=this.getContentDocument();if(e){var t=e.documentElement,n=t.scrollHeight,o=t.scrollWidth;console.log("Resize: #"+this.id+" width:"+o+"px height:"+n+"px"),console.count("resize"),0===n||0===o?this.remove():a(this.iframe,{width:o,height:n})}else this.remove()}}),n.exports=l},{"./utils":6}],5:[function(n,o){(function(i){var r=n("./utils").bind,s=function(e){this.config=e,this.load()};s.prototype={ajax:function(){var t,n=this;t=e.XMLHttpRequest?new XMLHttpRequest:new i.ActiveXObject("MSXML2.XMLHTTP.3.0"),t.onreadystatechange=function(){4===t.readyState?n.config.onLoad&&n.config.onLoad.call(n,t.responseText):n.config.onError&&n.config.onError.call(n)},t.open(n.config.method||"GET",n.config.url,!0),t.send()},jsonp:function(){var n=t.createElement("script"),o=this.config.url,i=this.config.callback||"callback",s="jsonPCallback";o+=-1===o.indexOf("?")?"?":"&",o+=i+"="+s,e[s]=r(function(e){console.log(e),this.config.onLoad.call(this,e)},this),n.onerror=this.config.onError,n.src=o,t.body.appendChild(n)},load:function(){this.config.jsonp?this.jsonp():this.ajax()}},o.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof e?e:{})},{"./utils":6}],6:[function(n,o){var i=function(e,t,n){(i=e.addEventListener?function(e,t,n){return e.addEventListener(t,n,!1)}:function(e,t,n){return e.attachEvent("on"+t,n)})(e,t,n)},r=function(e,t,n){(r=e.addEventListener?function(e,t,n){return e.removeEventListener(t,n)}:function(e,t,n){return e.dettachEvent("on"+t,n)})(e,t,n)},s=function(e,t){return e.bind?e.bind(t):function(e,t){return e.apply(t,arguments)}},c=function(e,t){for(var n in t)e.setAttribute(n,t[n])},a=function(){if(e.Promise){var t=Promise.resolve();return function(e){t.then(e)}}return e.setImmidiate?function(e){setImmidiate(e)}:function(e){setTimeout(e,0)}}(),f=function(e,n,o){var i=t.querySelector(e);i?n(i):"complete"!==t.readyState?a(function(){f(e,n,o)}):"function"==typeof o&&o()},u=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e};o.exports={bind:s,attr:c,on:i,off:r,onElement:f,nextTick:a,extend:u}},{}]},{},[2,1])}(this);